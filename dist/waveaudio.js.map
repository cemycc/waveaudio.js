{"version":3,"file":null,"sources":["../node_modules/rollup-plugin-typescript/src/typescript-helpers.js","../src/base.ts","../src/event.dispatcher.ts","../src/audio.context.ts","../src/canvas.context.ts","../src/main.ts"],"sourcesContent":["export const __assign = Object.assign || function (target) {\n    for (var source, i = 1; i < arguments.length; i++) {\n        source = arguments[i];\n        for (var prop in source) {\n            if (Object.prototype.hasOwnProperty.call(source, prop)) {\n                target[prop] = source[prop];\n            }\n        }\n    }\n    return target;\n};\n\nexport function __extends(d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport function __decorate(decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __metadata(k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n}\n\nexport function __param(paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator.throw(value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments)).next());\n    });\n}\n","export interface IFile {\n    url: string;\n    promise: Promise;\n    buffer: AudioBuffer;\n    color: string;\n}\n\nexport interface IProperties {\n    wrapper: HTMLElement | string;\n    audioFiles: Array<string> | string;\n    audioChannel: number;\n}\n\n\nexport class BaseClass {\n    private properties: IProperties;\n\n    constructor(properties: IProperties, validate?: boolean) {\n        this.properties = properties;\n        if (validate) {\n            this.validateProperties();\n        }\n    }\n\n    public validateProperties() {\n        if (typeof this.properties.wrapper === \"string\") {\n            this.properties.wrapper = <HTMLElement> document.querySelector(<string> this.properties.wrapper);\n            if (!this.properties.wrapper) {\n                throw new Error(\"No wrapper element was found\");\n            }\n        } else if (!(this.properties.wrapper instanceof HTMLElement)) {\n            throw new Error(\"Invalid wrapper element\");\n        }\n\n        if (typeof this.properties.audioFiles !== \"string\" && !(this.properties.audioFiles instanceof Array)) {\n            throw new Error(\"Invalid data for audio files\");\n        }\n        this.properties.audioFiles = [].concat(this.properties.audioFiles);\n    }\n\n    public setProperties(extended: BaseClass) {\n        for (let prop in this.properties) {\n            if (extended.hasOwnProperty(prop) && this.properties.hasOwnProperty(prop)) {\n                extended[prop] = this.properties[prop];\n            }\n        }\n    }\n\n    public getProperties(): IProperties {\n        return this.properties;\n    }\n\n    public getDiff(first: Array<any>, second: Array<any>) {\n        return first.filter((i) => second.indexOf(i) < 0);\n    }\n}\n","\n/**\n * Credits for event dispatcher class\n * http://stackoverflow.com/questions/12881212/does-typescript-support-events-on-classes\n */\n\ninterface IEventDispatcher<T> {\n    on(handler: { (data?: T): void }): void;\n    off(handler: { (data?: T): void }): void;\n}\n\nexport class EventDispatcher<T> implements EventDispatcher<T> {\n    private handlers: { (data?: T): void; }[] = [];\n\n    public on(handler: { (data?: T): void }) {\n        this.handlers.push(handler);\n    }\n\n    public off(handler: { (data?: T): void }) {\n        this.handlers = this.handlers.filter(h => h !== handler);\n    }\n\n    public trigger(data?: T) {\n        this.handlers.slice(0).forEach(h => h(data));\n    }\n}","import {IProperties, IFile, BaseClass} from \"./base\";\nimport {EventDispatcher} from \"./event.dispatcher\";\n\nexport class AudioContext extends BaseClass {\n    public sourceFiles: Array<IFile> = [];\n\n    private ctx: AudioContext;\n    private buffer: AudioBuffer;\n\n    private onDecodedBuffers = new EventDispatcher<AudioBuffer>();\n\n    constructor(properties: IProperties) {\n        super(properties);\n        super.setProperties(this);\n\n        this.ctx = new (window.AudioContext || window.webkitAudioContext)();\n    }\n\n\n    public decodeBuffersFromPromises(files: Array<IFile>)  {\n        Promise.all(files.map((file) => file.promise))\n            .then((buffers: any) => {\n                this.decodeBuffers(buffers, files);\n            }).catch((error: Error) => {\n                console.error(error);\n            });\n    }\n\n    public decodeBuffers(buffers: Array<ArrayBuffer>, files: Array<IFile>) {\n        let promises: Array<AudioBuffer> = buffers.map((buffer) => this.ctx.decodeAudioData(buffer));\n\n        Promise.all(promises)\n            .then(bfs => {\n                bfs = bfs.map((buffer, idx) => {\n                    let file = files[idx];\n                    file.buffer = buffer;\n                    return file;\n                });\n                this.sourceFiles = this.sourceFiles.concat(bfs);\n\n                //TODO: check if this is added at begining ??\n                // if (this.buffer !== undefined) {\n                //     bfs = bfs.concat(this.buffer); \n                // }\n\n                // TODO: when the buffer is changed, the source.buffer assignation should be also changed !\n                this.buffer = this.createAudioBuffer(this.sourceFiles);\n                this.onDecodedBuffers.trigger(this.buffer);\n                \n\n\n                // let source = this.ctx.createBufferSource();\n                // source.buffer = this.buffer;\n                // source.connect(this.ctx.destination);\n                // source.start();\n            }).catch((error: Error) => {\n                console.error(error);\n            });\n    }\n\n    public removeFiles(filesNames: Array<string>, fireEvent: boolean = true) {\n        for(let fileName of filesNames) {\n            let fileObj = this.sourceFiles.find(f => f.url === fileName);\n            this.sourceFiles.splice(this.sourceFiles.indexOf(fileObj), 1);\n        }\n\n        this.buffer = this.createAudioBuffer(this.sourceFiles);\n        fireEvent && this.onDecodedBuffers.trigger(this.buffer);\n    }\n\n    public get decodedBuffers(): EventDispatcher<AudioBuffer> {\n        return this.onDecodedBuffers;\n    };\n\n    public get currentTime(): number {\n        return this.ctx.currentTime;\n    }\n\n    public get fileNames(): Array<string> {\n        return this.sourceFiles.map(f => f.url);\n    }\n\n    public findStartPositionsOnChannel(channel: number): Array<number> {\n        let positions: Array<number> = [];\n        \n        let sum = 0;\n        for (let file of this.sourceFiles) {\n            let ch = channel > file.buffer.numberOfChannels - 1 ? 0 : channel;\n            let startAt = sum;\n            positions.push(startAt);\n            sum += file.buffer.getChannelData(ch).length;\n        }\n        return positions;\n    }\n\n    private createAudioBuffer(fromAudioBuffers: Array<IFile>) {\n        let maxChannels: number = 0;\n        let totalDuration: number = 0;\n\n        for (let file of fromAudioBuffers) {\n            let abf = file.buffer;\n            if (abf.numberOfChannels > maxChannels) {\n                maxChannels = abf.numberOfChannels;\n            }\n            totalDuration += abf.duration;\n        }\n\n        if (maxChannels === 0) {\n            return this.ctx.createBuffer(1, this.ctx.sampleRate, this.ctx.sampleRate);\n        }\n\n        let resultBuffer: AudioBuffer = this.ctx.createBuffer(maxChannels,\n            this.ctx.sampleRate * totalDuration,\n            this.ctx.sampleRate);\n\n        let idx = 0;\n        do {\n            let data: Array<Float32Array> = [];\n            fromAudioBuffers.forEach(file => {\n                let abf = file.buffer;\n                if (idx <= abf.numberOfChannels - 1) {\n                    data.push(abf.getChannelData(idx));\n                } else {\n                    data.push(new Float32Array(abf.getChannelData(0).length));\n                }\n            });\n            resultBuffer.copyToChannel(this.concatBuffersData(data), idx, 0);\n        } while (++idx < maxChannels);\n        \n        return resultBuffer;\n    }\n\n    private concatBuffersData(buffersData: Array<Float32Array>): Float32Array {\n        let resultLength: number = buffersData.reduce((base, item) => base + item.length, 0);\n        let currLength: number = 0;\n        let resultArray: Float32Array = new Float32Array(resultLength);\n\n        for (let bf of buffersData) {\n            resultArray.set(bf, currLength);\n            currLength += bf.length;\n        }\n        return resultArray;\n    }\n}\n","import {IProperties, IFile, BaseClass} from \"./base\";\n\ninterface CanvasRectObject {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n}\n\nexport class CanvasContext extends BaseClass {\n    public framesColor: string = \"rgb(208, 215, 220)\";\n    public framesElapsedColor: string = \"rgb(47,79,79)\";\n    public framesWidthBar: number = 5;\n    public framesWidthSpacer: number = 2;\n    public timelineHeight: number = 40;\n    public timelineFont: string = \"9px Arial\";\n    public timelineTimeColor: string = \"rgb(47,79,79)\";\n    public timelineBarColor: string = \"rgb(128,128,128)\";\n    public barHeight: number = 10;\n    public barWidth: number = 1;\n    public barLargeGroupCount: number = 10;\n    public barSmallGroupCount: number = 5;\n    public wrapper: HTMLElement = undefined;\n\n    private staticEl: HTMLElement;\n    private framesEl: HTMLElement;\n    private staticCtx: CanvasRenderingContext2D;\n    private framesCtx: CanvasRenderingContext2D;\n    private ratio: number;\n    private renderRectData: Array<CanvasRectObject>;\n    private rafId: number;\n\n    private step: number;\n    private audioData: Array<Array<number>>;\n    private audioFiles: Array<IFile>;\n    private audioDuration: number;\n    private audioProgress: Function;\n    private audioCompletedStatus: Function;\n\n    constructor(properties: IProperties) {\n        super(properties);\n        super.setProperties(this);\n\n        this.staticEl = document.createElement(\"canvas\");\n        this.staticCtx = this.staticEl.getContext(\"2d\");\n\n        this.framesEl = document.createElement(\"canvas\");\n        this.framesEl.style.position = \"absolute\";\n        this.framesEl.style.top = \"0\";\n        this.framesEl.style.left = \"0\";\n\n        this.framesCtx = this.framesEl.getContext(\"2d\");\n\n        let backingStoreRatio: number = this.staticCtx.webkitBackingStorePixelRatio ||\n                                    this.staticCtx.mozBackingStorePixelRatio ||\n                                    this.staticCtx.msBackingStorePixelRatio ||\n                                    this.staticCtx.oBackingStorePixelRatio ||\n                                    this.staticCtx.backingStorePixelRatio || 1;\n        this.ratio = window.devicePixelRatio / backingStoreRatio;\n\n        this.resize();\n        this.wrapper.appendChild(this.staticEl);\n        this.wrapper.appendChild(this.framesEl);\n    }\n\n    public get width(): number {\n        return this.staticEl.width / this.ratio;\n    }\n\n    public set width(value: number) {\n        for (let el of [\"staticEl\", \"framesEl\"]) {\n            this[el].width = value * this.ratio;\n            this[el].style.width = value + \"px\";\n        }\n    }\n\n    public get height(): number {\n        return this.staticEl.height / this.ratio;\n    }\n\n    public set height(value: number) {\n        for (let el of [\"staticEl\", \"framesEl\"]) {\n            this[el].height = value * this.ratio;\n            this[el].style.height = value + \"px\";\n        }\n    }\n\n    public resize() {\n        this.width = this.wrapper.offsetWidth;\n        this.height = this.wrapper.offsetHeight;\n\n        this.staticCtx.scale(this.ratio, this.ratio);\n        this.framesCtx.scale(this.ratio, this.ratio);\n    }\n\n    public loadAudioData(\n            bufferData: Float32Array,\n            duration: number,\n            files: Array<IFile>,\n            positions: Array<number>,\n            progress: () => number,\n            completed: () => boolean) {\n        this.audioProgress = progress;\n        this.audioCompletedStatus = completed;\n        this.audioDuration = duration;\n        this.audioFiles = files;\n        this.computeValues(bufferData, positions);\n\n        this.clear();\n    }\n\n    public draw() {\n        this.computeRenderData((rectObj: CanvasRectObject, idx: number, fileIdx: number) => {\n            //this.staticCtx.fillStyle = this.framesColor;\n            this.staticCtx.fillStyle = this.audioFiles.length ? this.audioFiles[fileIdx].color : this.framesColor;\n            this.staticCtx.fillRect(rectObj.x, rectObj.y, rectObj.width, rectObj.height);\n        });\n\n        this.drawTimeline(this.audioDuration);\n        //this.startRenderingProgress();\n    }\n\n    public startRenderingProgress() {\n        let rafFct = () => {\n            this.drawFrames(this.audioProgress());\n\n            if (this.audioCompletedStatus()) {\n                this.stopRenderingProgress();\n            } else {\n                this.rafId = requestAnimationFrame(rafFct);\n            }\n        };\n        this.rafId = requestAnimationFrame(rafFct);\n    }\n\n    public stopRenderingProgress() {\n        if (this.rafId) {\n            cancelAnimationFrame(this.rafId);\n        }\n    }\n\n    private drawFrames(fillTo: number) {\n        this.clear(true);\n\n        for (let rectObj of this.renderRectData) {\n            this.framesCtx.fillStyle = this.framesElapsedColor;\n            this.framesCtx.fillRect(rectObj.x, rectObj.y, rectObj.width, rectObj.height);\n\n            if (rectObj.x > fillTo) {\n                break;\n            }\n        }\n    }\n\n    private computeRenderData(callback?: (rectObj, idx, fileIdx) => void) {\n        this.renderRectData = new Array();\n\n        let idx: number = 0;\n        for (let data of this.audioData) {\n            let sample = isNaN(data[0]) ? 0 : data[0];\n            let fileIdx = data[1];\n            let posX = idx * this.framesWidthBar;\n            let posY = (this.height / 2 - this.timelineHeight / 2) - sample;\n            let negY = (this.height / 2 - this.timelineHeight / 2) + sample;\n            let width = this.framesWidthBar - this.framesWidthSpacer;\n\n            let rectObj: CanvasRectObject = {\n                x: posX,\n                y: posY,\n                width: width,\n                height: negY - posY > 0 ? negY - posY : width,\n            };\n            this.renderRectData.push(rectObj);\n\n            if (typeof callback === \"function\") {\n                callback(rectObj, idx, fileIdx);\n            }\n            idx++;\n        }\n    }\n\n    private computeValues(bufferData: Float32Array, positions: Array<number>) {\n        let numSubsets = Math.floor(this.width / this.framesWidthBar);\n        let subsetLength = bufferData.length / numSubsets;\n\n        this.audioData = new Array(numSubsets);\n\n        let bufferIdx = 0;\n        let normal = 0;\n        for (let i = 0; i < this.audioData.length; i++) {\n            let sum = 0;\n\n            for (let k = 0; k < subsetLength; k++) {\n                if (bufferData[bufferIdx]) {\n                    sum += Math.abs(bufferData[bufferIdx]);\n                }\n                bufferIdx++;\n            }\n            \n            var leftClosestIdx = positions.length ? positions.indexOf(positions.reduce(function (prev, curr) {\n                return prev <= bufferIdx && curr > bufferIdx ? prev : curr;\n            })) : 0;\n\n            this.audioData[i] = [sum / subsetLength, leftClosestIdx];\n            if (this.audioData[i][0] > normal) {\n                normal = this.audioData[i][0];\n            }\n        }\n\n        normal = 32768 / normal;\n        for (let i = 0; i < this.audioData.length; i++) {\n            this.audioData[i][0] *= normal;\n            this.audioData[i][0] = (this.audioData[i][0] / 32768) * ((this.height - this.timelineHeight) / 2);\n            \n        }\n    }\n\n    private drawTimeline(duration: number) {\n        let secs = Math.ceil(duration);\n        let gapSize = this.width / secs;\n        let gapSizeBar = gapSize / this.barSmallGroupCount;\n        let timelineMiddle = Math.floor(this.timelineHeight / 2);\n\n        let drawTime = (time: number, leftPadding: number): void => {\n            let timeStr = this.toHHMMSS(time);\n            let timeStrW = this.staticCtx.measureText(timeStr).width;\n            let timeStrH = parseInt(this.staticCtx.font, 10);\n\n            let xPos;\n            if (leftPadding === 0) {\n                xPos = 0;\n            } else if (leftPadding === this.width) {\n                xPos = leftPadding - timeStrW;\n            } else {\n                xPos = leftPadding - timeStrW / 2;\n            }\n\n            this.staticCtx.fillStyle = this.timelineTimeColor;\n            this.staticCtx.fillText(timeStr,\n                xPos,\n                this.height - timelineMiddle + timeStrH);\n        };\n\n        this.staticCtx.font = this.timelineFont;\n        for (let sec = 0; sec <= secs; sec++) {\n            let height = this.barHeight;\n            let leftPadding = gapSize * sec;\n            if (sec % this.barLargeGroupCount === 0 || sec === secs) {\n                height += this.barHeight / 2;\n                drawTime(sec, leftPadding);\n            }\n\n            let xPos = leftPadding === 0 ? 0 : leftPadding - 1;\n\n            this.staticCtx.fillStyle = this.timelineBarColor;\n            this.staticCtx.fillRect(xPos,\n                this.height - timelineMiddle - height,\n                this.barWidth,\n                height);\n            for (let bar = 1; bar < this.barSmallGroupCount; bar++) {\n                height = this.barHeight / 2;\n                this.staticCtx.fillRect(xPos + bar * gapSizeBar,\n                    this.height - timelineMiddle - height,\n                    this.barWidth,\n                    height);\n            }\n        }\n\n    }\n\n    private clear(onlyFramesCtx?: boolean) {\n        if (!onlyFramesCtx) {\n            this.staticCtx.clearRect(0, 0, this.width, this.height);\n        }\n        this.framesCtx.clearRect(0, 0, this.width, this.height);\n    }\n\n    private toHHMMSS(secs: number) {\n        let hours: any = Math.floor(secs / 3600);\n        let minutes: any = Math.floor((secs - (hours * 3600)) / 60);\n        let seconds: any = secs - (hours * 3600) - (minutes * 60);\n\n        if (hours < 10) {\n            hours = \"0\" + hours.toString();\n        }\n        if (minutes < 10) {\n            minutes = \"0\" + minutes.toString();\n        }\n        if (seconds < 10) {\n            seconds = \"0\" + seconds.toString();\n        }\n        if (hours === \"00\") {\n            return minutes + \":\" + seconds;\n        } else {\n            return hours + \":\" + minutes + \":\" + seconds;\n        }\n\n    }\n\n}\n","import {IProperties, IFile, BaseClass} from \"./base\";\nimport {AudioContext} from \"./audio.context\";\nimport {CanvasContext} from \"./canvas.context\";\n\n/**\n * At this moment the library suports only the audio from a single channel\n */\nconst DEFAULT_AUDIO_CHANNEL:number = 0;\n\nexport class WaveAudioJS extends BaseClass {\n\n    private audioCtx: AudioContext;\n    private canvasCtx: CanvasContext;\n\n    constructor(properties: IProperties) {\n        super(properties, true);\n\n        this.canvasCtx  = new CanvasContext(super.getProperties());\n        this.audioCtx   = new AudioContext(super.getProperties());\n        \n        this.audioCtx.decodedBuffers.on(audioBuffer => this.render(audioBuffer));\n\n        this.addFiles(<Array<string>> super.getProperties().audioFiles);\n    }\n\n    public files(files: Array<string>) {\n        let removedFiles: Array<string> = this.getDiff(this.audioCtx.fileNames, files);\n        let addedFiles: Array<string> = this.getDiff(files, this.audioCtx.fileNames);\n        \n        removedFiles.length && this.audioCtx.removeFiles(removedFiles, !(addedFiles.length > 0));\n        addedFiles.length && this.addFiles(addedFiles);\n    }\n\n    private render(audioBuffer: AudioBuffer) {\n        this.canvasCtx.loadAudioData(\n            audioBuffer.getChannelData(DEFAULT_AUDIO_CHANNEL),\n            audioBuffer.duration,\n            this.audioCtx.sourceFiles,\n            this.audioCtx.findStartPositionsOnChannel(DEFAULT_AUDIO_CHANNEL),\n            () => this.audioCtx.currentTime / audioBuffer.duration * this.canvasCtx.width,\n            () => this.audioCtx.currentTime > audioBuffer.duration\n        );\n        this.canvasCtx.draw();\n    }\n\n\n    private addFiles(filesNames: Array<string>) {\n        let files: Array<IFile> = filesNames.map(this.sendRequest);\n        this.audioCtx.decodeBuffersFromPromises(files);\n    }\n\n    private sendRequest(fileURL): IFile {\n        let filePromise = new Promise((resolve, reject) => {\n            let request = new XMLHttpRequest();\n\n            request.open(\"GET\", fileURL, true);\n            request.responseType = \"arraybuffer\";\n            request.onload = () => {\n                resolve(request.response);\n            };\n            request.onerror = function() {\n                reject(\"Invalid audio file \" + fileURL);\n            };\n            request.send();\n        });\n        var getRandomColor = function () {\n            var letters = '0123456789ABCDEF';\n            var color = '#';\n            for (var i = 0; i < 6; i++ ) {\n                color += letters[Math.floor(Math.random() * 16)];\n            }\n            return color;\n        }\n        return <IFile> {\n            url: fileURL,\n            promise: filePromise,\n            color: getRandomColor()\n        }\n    }\n}\n\n"],"names":[],"mappings":"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"}